function debounce(e,t){let a;return function(...o){clearTimeout(a),a=setTimeout((()=>{clearTimeout(a),e(...o)}),t)}}const setActiveItem=e=>{e.classList.add("active"),e.querySelectorAll(".navsquare").forEach(((e,t)=>{Math.floor(t/squaresPerRow);const a=t%squaresPerRow,o=Math.random()*maxAdditionalDelayPerRow+a*baseDelayPerCol;addScaleAnimation(e,o)}))},clearActiveItems=e=>{document.querySelectorAll("#navbar li").forEach((t=>{t!==e&&(t.classList.remove("active"),t.querySelectorAll(".navsquare").forEach((e=>{removeScaleAnimation(e)})))}))},addScaleAnimation=(e,t)=>{e.style.transform="scale(1)",e.style.transitionDelay=`${t}ms`},removeScaleAnimation=e=>{e.style.transform="",e.style.transitionDelay=""};function createGrid(e,t,a,o){let l=e.querySelector(".grid-container");l?l.innerHTML="":(l=document.createElement("div"),l.classList.add("grid-container"),l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",e.appendChild(l));const n=document.createDocumentFragment();for(let e=0;e<o+2;e++)for(let o=0;o<a;o++){const a=document.createElement("div");a.classList.add("navsquare"),a.style.width=`${t}px`,a.style.height=`${t}px`,a.style.position="absolute",a.style.top=e*t+"px",a.style.left=o*t+"px",n.appendChild(a)}l.appendChild(n)}function updateActiveNavLink(){const e=document.querySelectorAll("#contents section"),t=document.querySelectorAll("#navbar ul li a");let a="";e.forEach((e=>{const t=e.offsetTop,o=e.offsetHeight;document.querySelector("#contents").scrollTop>=t-o/3&&(a=e.getAttribute("id"))})),t.forEach((e=>{e.classList.remove("active");const t=e.closest("li").querySelectorAll(".navsquare");e.getAttribute("href").includes(a)?(e.classList.add("active"),t.forEach((e=>{addScaleAnimation(e,0)}))):t.forEach((e=>{removeScaleAnimation(e)}))}))}function setupNavSquares(e,t,a){document.querySelectorAll("#navbar li a").forEach((o=>{const l=o.closest("li"),n=l.offsetWidth,s=l.offsetHeight,r=Math.floor(n/e),c=Math.floor(s/e);createGrid(l,e,r,c),l.addEventListener("mouseenter",(()=>{o.classList.contains("active")||(o.classList.add("text-black"),l.querySelectorAll(".navsquare").forEach(((e,o)=>{Math.floor(o/r);const l=o%r,n=Math.random()*a+l*t;addScaleAnimation(e,n)})))})),l.addEventListener("mouseleave",(()=>{o.classList.contains("active")||(o.classList.remove("text-black"),l.querySelectorAll(".navsquare").forEach((e=>{removeScaleAnimation(e)})))}))}))}const squareSize=5,baseDelayPerCol=3,maxAdditionalDelayPerRow=10;document.querySelector("#contents").addEventListener("scroll",debounce((()=>{updateActiveNavLink()}),15)),window.addEventListener("resize",debounce((()=>{setupNavSquares(5,baseDelayPerCol,maxAdditionalDelayPerRow)}),100)),document.addEventListener("DOMContentLoaded",(()=>{setupNavSquares(5,baseDelayPerCol,maxAdditionalDelayPerRow),updateActiveNavLink()}));